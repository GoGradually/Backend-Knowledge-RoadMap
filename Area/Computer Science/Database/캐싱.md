- 단순 캐싱: 가벼운 [[Memcached]]
- 복잡한 데이터 인메모리 처리: [[Redis]]
### 1. **캐시의 목적과 범위 정의**

- **목적 설정:** 성능 향상, 데이터베이스 부하 감소, 사용자 경험 개선 등 캐시를 통해 달성하고자 하는 목표를 명확히 합니다.
- **범위 결정:** 어떤 데이터나 요청을 캐싱할지 결정합니다. 예를 들어, 정적 콘텐츠, API 응답, 데이터베이스 쿼리 결과 등.

### 2. **데이터 접근 패턴 분석**

- **데이터의 사용 빈도:** 자주 요청되는 데이터는 캐시에 저장하는 것이 효과적입니다.
- **데이터의 변경 빈도:** 자주 변경되는 데이터는 캐시 유지 관리가 복잡할 수 있으므로 신중히 고려해야 합니다.

### 3. **캐시 위치 선택**

- **클라이언트 측 캐싱:** 브라우저나 모바일 앱 등 클라이언트에서 캐시를 관리합니다. 네트워크 지연을 줄일 수 있지만, 보안과 일관성 문제가 있을 수 있습니다.
- **서버 측 캐싱:** 애플리케이션 서버나 데이터베이스 앞에 캐시 서버(예: Redis, Memcached)를 두어 서버 부하를 줄입니다.
- **CDN (Content Delivery Network):** 전 세계에 분산된 서버를 통해 정적 콘텐츠를 캐싱하여 사용자에게 더 빠르게 전달합니다.

### 4. **캐시 저장소 선택**

- **인메모리 캐시:** 빠른 읽기/쓰기가 가능하지만 용량이 제한적입니다. (예: Redis, Memcached)
- **디스크 기반 캐시:** 더 큰 데이터를 저장할 수 있지만 접근 속도가 느릴 수 있습니다.

### 5. **캐시 정책 설정**

- **캐시 만료 정책 (TTL):** 데이터가 캐시에 얼마나 오래 머물지 결정합니다. 적절한 TTL을 설정하여 데이터의 신선도를 유지합니다.
- **캐시 갱신 전략:** 데이터가 변경될 때 캐시를 어떻게 업데이트할지 결정합니다. 예를 들어, 쓰기 시 캐시 무효화 또는 갱신.

### 6. **캐시 교체 정책 선택**

- **LRU (Least Recently Used):** 가장 오랫동안 사용되지 않은 데이터를 먼저 제거합니다.
- **LFU (Least Frequently Used):** 가장 적게 사용된 데이터를 먼저 제거합니다.
- **FIFO (First In First Out):** 먼저 들어온 데이터를 먼저 제거합니다.
- **Custom Policies:** 애플리케이션의 특성에 맞는 맞춤형 정책을 설계할 수도 있습니다.

### 7. **데이터 일관성 관리**
- **캐시 일관성 유지:** 데이터베이스와 캐시 간의 일관성을 유지하기 위한 메커니즘을 구현합니다. 예를 들어, 캐시 무효화, 캐시 업데이트 시 트랜잭션 사용.
- **CAP 이론 고려:** 일관성, 가용성, 파티션 내구성 중 어떤 특성을 우선시할지 결정합니다.
##### 캐시-DB간 데이터 일관성 관리 전략
1. Write-Through 전략
	- 데이터 쓰기 시 캐시와 DB를 동시에 업데이트
	- 장점: 데이터 일관성이 항상 보장됨
	- 단점: 쓰기 지연시간이 증가할 수 있음

2. Write-Behind (Write-Back) 전략
	- 먼저 캐시를 업데이트하고, 나중에 비동기적으로 DB 업데이트
	- 장점: 쓰기 성능이 향상됨
	- 단점: 시스템 장애 시 데이터 손실 위험이 있음

3. Cache-Aside (Lazy Loading) 전략
	- 읽기 시: 캐시 확인 → 없으면 DB에서 로드 → 캐시에 저장
	- 쓰기 시: DB 직접 업데이트 → 캐시 invalidate
	- 장점: 구현이 상대적으로 간단하고 널리 사용됨
	- 단점: 캐시 미스 시 지연시간 발생

### 8. **모니터링 및 튜닝**

- **성능 모니터링:** 캐시 히트율, 캐시 미스율, 응답 시간 등을 지속적으로 모니터링합니다.
- **최적화:** 모니터링 결과를 바탕으로 캐시 정책, TTL, 용량 등을 조정하여 최적의 성능을 유지합니다.

### 9. **보안 고려사항**

- **데이터 민감도:** 캐시할 데이터가 민감한 정보인 경우 접근 제어와 암호화를 고려해야 합니다.
- **캐시된 데이터 보호:** 캐시 서버에 대한 접근을 제한하고, 데이터 유출을 방지하는 보안 조치를 취합니다.

### 10. **적절한 도구와 기술 선택**

- **캐시 서버:** Redis, Memcached 등 요구사항에 맞는 캐시 서버를 선택합니다.
- **CDN 서비스:** Cloudflare, AWS CloudFront 등 적합한 CDN 서비스를 활용합니다.
- **프레임워크 통합:** 애플리케이션 프레임워크와 캐시를 효율적으로 통합할 수 있는 라이브러리나 도구를 사용합니다.

### 예시: 웹 애플리케이션 캐싱 전략

1. **정적 콘텐츠:** 이미지, CSS, JavaScript 파일 등은 CDN을 통해 캐싱하여 전 세계 사용자에게 빠르게 제공.
2. **API 응답:** 자주 변경되지 않는 API 응답은 서버 측 캐시에 저장하여 데이터베이스 호출을 줄임.
3. **데이터베이스 쿼리 결과:** 빈번하게 조회되지만 변경이 적은 데이터는 인메모리 캐시에 저장하여 응답 시간을 단축.
4. **사용자 세션 데이터:** 빠른 접근이 필요한 세션 데이터는 Redis와 같은 인메모리 데이터 저장소에 저장.




# 주요 용어
- [[TTL]]

# 주요 문제
- [[캐시 스탬피드]]
- [[Cold Cache]]
- [[Hot Key 문제]]
- [[Stale Data]]
- [[Cache Exhaustion]]